<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Pipe PRO</title>
<style>
:root{--orange:#ff4e00;--bg:#000;--card:#111;--text:#fff;--blue:#007bff;}
body{margin:0;font-family:sans-serif;background:var(--bg);color:var(--text);overflow:hidden;}
.header{padding:12px;text-align:center;font-weight:900;border-bottom:3px solid var(--orange);font-size:1.1rem;letter-spacing:2px;background:#000;}
.tabs{display:flex;background:#111;overflow-x:auto;border-bottom:1px solid #333;scrollbar-width:none;}
.tabs::-webkit-scrollbar{display:none;}
.tab-btn{flex:1;border:none;padding:12px 10px;font-size:0.6rem;color:#666;background:none;cursor:pointer;white-space:nowrap;text-transform:uppercase;min-width:85px;}
.tab-btn.active{color:var(--orange);border-bottom:2px solid var(--orange);background:#1a1a1a;}
.content{height:calc(100vh - 90px);overflow-y:auto;padding:12px;box-sizing:border-box;}
.card{background:var(--card);border-radius:8px;padding:12px;margin-bottom:12px;border:1px solid #222;}
.label{font-size:0.55rem;color:#888;text-transform:uppercase;margin-bottom:6px;display:block;}
select,input{background:#1a1a1a;border:1px solid #333;color:#fff;padding:10px;border-radius:6px;width:100%;margin-bottom:12px;font-size:0.95rem;box-sizing:border-box;}
.res-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.res-box{text-align:center;background:#050505;border:1px solid #333;border-radius:6px;padding:10px;}
.res-box.highlight{border-color:var(--orange);}
.res-val{font-size:1.1rem;color:var(--orange);font-weight:bold;display:block;}
.res-txt{font-size:0.55rem;color:#666;text-transform:uppercase;}
table{width:100%;border-collapse:collapse;font-size:0.75rem;margin-top:5px;}
th{background:#222;color:var(--orange);text-align:left;padding:8px;position:sticky;top:-1px;z-index:10;}
td{padding:8px;border-bottom:1px solid #222;color:#ddd;}
.search-box{border:1px solid var(--orange) !important; margin-bottom:10px;}
</style>
</head>
<body>

<div class="header">PIPE PRO</div>

<div class="tabs">
    <button id="btn-dec" class="tab-btn active" onclick="showTab('dec')">Décroché</button>
    <button id="btn-ser" class="tab-btn" onclick="showTab('ser')">Sertinox</button>
    <button id="btn-cin" class="tab-btn" onclick="showTab('cin')">Cintrage</button>
    <button id="btn-fit" class="tab-btn" onclick="showTab('fit')">Fitok</button>
    <button id="btn-dw" class="tab-btn" onclick="showTab('dw')">Dockweiler</button>
    <button id="btn-aba" class="tab-btn" onclick="showTab('aba')">Abaques</button>
</div>

<div class="content">

    <div id="sec-cin" class="tab-content" style="display:none">
        <div class="card">
            <span class="label">Angle (degrés)</span>
            <input id="cin-angle" type="number" value="90" oninput="calcCin()">
            <span class="label">Rayon de cintrage (R)</span>
            <input id="cin-rayon" type="number" placeholder="Rayon en mm" oninput="calcCin()">
            <span class="label">Cote souhaitée (Axe)</span>
            <input id="cin-cote" type="number" placeholder="Cote finale" oninput="calcCin()">
            
            <div class="res-grid">
                <div class="res-box highlight">
                    <span id="cin-dev" class="res-val">--</span>
                    <span class="res-txt">Dév. Arc (mm)</span>
                </div>
                <div class="res-box">
                    <span id="cin-mark" class="res-val">--</span>
                    <span class="res-txt">Repère Début</span>
                </div>
            </div>
            <p style="font-size:0.6rem; color:#888; margin-top:10px;">
                * Swagelok : Utilisez le rayon spécifique de la réglette.<br>
                * REMS/Mingori : Mesurez du centre du galet.
            </p>
        </div>
    </div>

    <div id="sec-dec" class="tab-content">
        <div class="card">
            <span class="label">Hauteur H (mm)</span>
            <input id="inp-dec-h" type="number" oninput="calcDec()" placeholder="H">
            <span class="label">Encombrement 45° ISO</span>
            <select id="sel-dec-iso" onchange="applyIso()">
                <option value="0">Manuel</option>
                <option value="12">17.2 (DN10) → 12</option>
                <option value="16">21.3 (DN15) → 16</option>
                <option value="17">26.9 (DN20) → 17</option>
                <option value="21">33.7 (DN25) → 21</option>
                <option value="24">42.4 (DN32) → 24</option>
                <option value="26">48.3 (DN40) → 26</option>
                <option value="33">60.3 (DN50) → 33</option>
            </select>
            <input id="inp-dec-e" type="number" oninput="calcDec()" placeholder="Lx">
            <div class="res-grid">
                <div class="res-box"><span id="val-axe" class="res-val">--</span><span class="res-txt">Axe‑Axe</span></div>
                <div class="res-box highlight"><span id="val-coupe" class="res-val">--</span><span class="res-txt">À Couper</span></div>
            </div>
        </div>
    </div>

    <div id="sec-ser" class="tab-content" style="display:none">
        <div class="card">
            <span class="label">Diamètre Sertinox</span>
            <select id="ser-od" onchange="calcSer()">
                <option value="15">Ø 15</option><option value="18">Ø 18</option><option value="22">Ø 22</option><option value="28">Ø 28</option><option value="35">Ø 35</option><option value="42">Ø 42</option><option value="54">Ø 54</option><option value="76">Ø 76.1</option><option value="89">Ø 88.9</option><option value="108">Ø 108</option>
            </select>
            <span class="label">Raccord</span>
            <select id="ser-type" onchange="calcSer()">
                <option value="90">Coude 90° (Z)</option><option value="45">Coude 45° (Z)</option><option value="te">Té Égal (Z)</option><option value="man">Manchon (Z=2)</option>
            </select>
            <div class="res-grid">
                <div class="res-box highlight"><span id="ser-emb" class="res-val">--</span><span class="res-txt">Emboît. (A)</span></div>
                <div class="res-box highlight"><span id="ser-z" class="res-val">--</span><span class="res-txt">Enc. (Z)</span></div>
            </div>
        </div>
    </div>

    <div id="sec-dw" class="tab-content" style="display:none">
        <div class="card">
            <select id="dw-type" onchange="calcDW()">
                <option value="90">90° Elbow (E9)</option><option value="45">45° Elbow (E4)</option><option value="tee">Tee (TE)</option>
            </select>
            <select id="dw-od" onchange="calcDW()">
                <option value="1/4">1/4"</option><option value="3/8">3/8"</option><option value="1/2">1/2"</option><option value="3/4">3/4"</option><option value="1">1"</option><option value="1.5">1-1/2"</option><option value="2">2"</option><option value="2.5">2-1/2"</option><option value="3">3"</option><option value="4">4"</option><option value="6">6"</option>
            </select>
            <div class="res-grid">
                <div class="res-box"><span id="dw-l1" class="res-val">--</span><span class="res-txt">Encombrement</span></div>
                <div class="res-box"><span id="dw-l3" class="res-val">--</span><span class="res-txt">Longueur droit</span></div>
            </div>
        </div>
    </div>

    <div id="sec-fit" class="tab-content" style="display:none">
        <div class="card">
            <span class="label">Raccord Fitok</span>
            <select id="fit-type" onchange="calcFit()">
                <option value="90">Coude 90°</option><option value="45">Coude 45°</option><option value="tee">Té Égal</option>
            </select>
            <select id="fit-od" onchange="calcFit()">
                <option value="1/4">1/4"</option><option value="1/2">1/2"</option><option value="1">1"</option><option value="2">2"</option>
            </select>
            <div class="res-grid">
                <div class="res-box highlight"><span id="fit-L" class="res-val">--</span><span class="res-txt">Encombrement</span></div>
                <div class="res-box highlight"><span id="fit-Lx" class="res-val">--</span><span class="res-txt">Longueur droite</span></div>
            </div>
        </div>
    </div>

    <div id="sec-aba" class="tab-content" style="display:none">
        <div class="card">
            <select id="sel-norme" onchange="filterAbaque()">
                <option value="iso">ISO 4200 (DN10-600)</option><option value="bpe">ASME BPE (1/4"-6")</option>
            </select>
            <input type="text" id="aba-search" class="search-box" placeholder="Recherche diamètre..." onkeyup="filterAbaque()">
            <table id="aba-table">
                <thead><tr id="thr"></tr></thead>
                <tbody id="abaque-body"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const dataAba = {
    iso: [["10","17.2","1.8"],["15","21.3","2.0"],["20","26.9","2.3"],["25","33.7","2.6"],["32","42.4","2.9"],["40","48.3","3.0"],["50","60.3","3.6"],["65","76.1","4.0"],["80","88.9","4.5"],["100","114.3","5.0"],["150","168.3","6.0"],["200","219.1","7.0"],["300","323.9","8.0"],["600","610.0","11.0"]],
    bpe: [["1/4","6.35","0.89"],["3/8","9.53","0.89"],["1/2","12.70","1.65"],["3/4","19.05","1.65"],["1","25.40","1.65"],["1.5","38.10","1.65"],["2","50.80","1.65"],["2.5","63.50","1.65"],["3","76.20","1.65"],["4","101.60","2.11"],["6","152.40","2.77"]]
};
const ser_db = {"15":{e:20,z90:18,z45:7,zte:10},"18":{e:20,z90:22,z45:8,zte:11},"22":{e:21,z90:26,z45:11,zte:13},"28":{e:23,z90:33,z45:14,zte:17},"35":{e:26,z90:42,z45:17,zte:21},"42":{e:30,z90:54,z45:21,zte:25},"54":{e:35,z90:71,z45:27,zte:32},"76":{e:55,z90:94,z45:36,zte:42},"89":{e:60,z90:111,z45:43,zte:50},"108":{e:75,z90:138,z45:53,zte:62}};
const dw_db = {"90":{"1/4":{l1:66.7,l3:52.4},"3/8":{l1:66.7,l3:38.1},"1/2":{l1:76.2,l3:49.2},"3/4":{l1:76.2,l3:50.2},"1":{l1:76.2,l3:38.1},"2":{l1:120.7,l3:44.5},"4":{l1:203.2,l3:50.8}},"45":{"1/4":{l1:50.8,l3:0},"1/2":{l1:57.2,l3:0},"1":{l1:57.2,l3:0},"2":{l1:76.2,l3:0},"4":{l1:114.3,l3:0}},"tee":{"1/4":{l1:89,l3:44.5},"1/2":{l1:95.2,l3:47.6},"1":{l1:108,l3:54},"2":{l1:146,l3:73},"4":{l1:209.6,l3:104.8}}};
const fit_db = {"90":{"1/4":{L:49,Lx:29},"1/2":{L:54,Lx:29},"1":{L:69,Lx:36},"2":{L:123,Lx:46}},"45":{"1/4":{L:38,Lx:29},"1/2":{L:40,Lx:29},"1":{L:50,Lx:36},"2":{L:78,Lx:46}},"tee":{"1/4":{L:70,Lx:35},"1/2":{L:78,Lx:39},"1":{L:110,Lx:55},"2":{L:154,Lx:77}}};

function calcCin(){
    const a = +document.getElementById("cin-angle").value;
    const r = +document.getElementById("cin-rayon").value;
    const c = +document.getElementById("cin-cote").value;
    if(a && r){
        const dev = (Math.PI * r * a) / 180;
        document.getElementById("cin-dev").innerText = dev.toFixed(1);
        if(c) {
            const mark = c - r; // Point de début de cintrage standard
            document.getElementById("cin-mark").innerText = mark.toFixed(1);
        }
    }
}
function calcSer(){const d=ser_db[document.getElementById("ser-od").value],t=document.getElementById("ser-type").value;let z=(t==="90"?d.z90:(t==="45"?d.z45:(t==="te"?d.zte:2)));document.getElementById("ser-emb").innerText=d.e;document.getElementById("ser-z").innerText=z;}
function applyIso(){const v=document.getElementById("sel-dec-iso").value;if(v!="0")document.getElementById("inp-dec-e").value=v;calcDec();}
function calcDec(){const h=+document.getElementById("inp-dec-h").value,e=+document.getElementById("inp-dec-e").value||0;if(h>0){const a=Math.round(h*1.4142);document.getElementById("val-axe").innerText=a;document.getElementById("val-coupe").innerText=Math.max(0,a-(2*e));}}
function calcDW(){const t=document.getElementById("dw-type").value,d=dw_db[t][document.getElementById("dw-od").value]||{l1:0,l3:0};document.getElementById("dw-l1").innerText=d.l1;document.getElementById("dw-l3").innerText=t==="45"?"---":d.l3;}
function calcFit(){const t=document.getElementById("fit-type").value,o=document.getElementById("fit-od").value,d=fit_db[t][o]||{L:0,Lx:0};document.getElementById("fit-L").innerText=d.L;document.getElementById("fit-Lx").innerText=d.Lx;}
function filterAbaque(){const n=document.getElementById("sel-norme").value,q=document.getElementById("aba-search").value.toLowerCase(),h=n==='iso'?["DN","Ext","Ep"]:["Size","OD","Ep"];document.getElementById("thr").innerHTML=h.map(x=>`<th>${x}</th>`).join('');document.getElementById("abaque-body").innerHTML=dataAba[n].filter(r=>r.some(c=>c.toLowerCase().includes(q))).map(r=>`<tr>${r.map(c=>`<td>${c}</td>`).join('')}</tr>`).join('');}
function showTab(t){document.querySelectorAll(".tab-content").forEach(s=>s.style.display="none");document.getElementById("sec-"+t).style.display="block";document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));document.getElementById("btn-"+t).classList.add("active");if(t==='aba')filterAbaque();}
window.onload=()=>{calcSer();calcDW();calcFit();filterAbaque();};
</script>
</body>
</html>
