<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rabbit PipeFit Pro - Master Edition</title>
    <style>
        :root { --orange: #ff4e00; --bg: #000; --card: #111; --text: #fff; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; overflow: hidden; }
        .header { background: #000; border-bottom: 2px solid var(--orange); padding: 8px; text-align: center; font-weight: bold; font-size: 0.9rem;}
        .tabs { display: flex; height: 45px; background: #111; border-bottom: 1px solid #333; overflow-x: auto; }
        .tab-btn { flex: 0 0 25%; border: none; background: none; color: #666; font-size: 0.5rem; font-weight: bold; text-transform: uppercase; white-space: nowrap; }
        .tab-btn.active { color: var(--orange); border-bottom: 2px solid var(--orange); }
        .content { height: calc(100vh - 95px); overflow-y: auto; padding: 12px; box-sizing: border-box; }
        .card { background: var(--card); border-radius: 12px; padding: 12px; border: 1px solid #333; margin-bottom: 10px; }
        .label { font-size: 0.65rem; color: #888; text-transform: uppercase; margin-bottom: 5px; display: block;}
        input, select { background: #222; border: 1px solid #444; color: white; padding: 10px; width: 100%; border-radius: 8px; font-size: 1rem; margin-bottom: 8px; }
        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .res-box { background: #000; border: 1px solid var(--orange); padding: 10px; text-align: center; border-radius: 8px; }
        .res-val { font-size: 1.4rem; color: var(--orange); font-weight: bold; display: block; }
        .res-txt { font-size: 0.6rem; color: #888; }
        table { width: 100%; border-collapse: collapse; font-size: 0.7rem; }
        th { color: var(--orange); text-align: left; padding: 5px; border-bottom: 1px solid #333; background: #000; position: sticky; top:0; }
        td { padding: 5px; border-bottom: 1px solid #222; }
    </style>
</head>
<body>

    <div class="header">PIPEFIT PRO : MASTER EDITION</div>
    
    <div class="tabs">
        <button id="t-dec" class="tab-btn active" onclick="showTab('dec')">Décroché</button>
        <button id="t-sert" class="tab-btn" onclick="showTab('sert')">Sertinox</button>
        <button id="t-pur" class="tab-btn" onclick="showTab('pur')">UltraPur</button>
        <button id="t-aba" class="tab-btn" onclick="showTab('aba')">Abaques</button>
    </div>

    <div class="content">
        <div id="sec-dec">
            <div class="card">
                <span class="label">Hauteur du Décroché (H en mm)</span>
                <input type="number" id="inp-dec-h" placeholder="Ex: 200" oninput="calcDecroche()">
                <span class="label">Encombrement 1 coude 45° (mm)</span>
                <input type="number" id="inp-dec-e" placeholder="Ex: 40" oninput="calcDecroche()">
                
                <div class="res-grid">
                    <div class="res-box"><span id="val-dec-axe" class="res-val">--</span><span class="res-txt">Cote Axe-Axe (mm)</span></div>
                    <div class="res-box"><span id="val-dec-coupe" class="res-val">--</span><span class="res-txt">Tube à couper (mm)</span></div>
                </div>
                <p style="font-size:0.6rem; color:#666; margin-top:10px;">Formule : Axe-Axe = H × 1.414 | Coupe = Axe-Axe - (2 × Encombrement).</p>
            </div>
        </div>

        <div id="sec-sert" style="display:none;">
            <div class="card">
                <span class="label">Diamètre Sertinox</span>
                <select id="sel-sert" onchange="calcSert()">
                    <option value="15,20">Ø18 (DN15)</option><option value="20,21">Ø22 (DN20)</option>
                    <option value="25,23">Ø28 (DN25)</option><option value="32,26">Ø35 (DN32)</option>
                    <option value="40,30">Ø42 (DN40)</option><option value="50,35">Ø54 (DN50)</option>
                    <option value="65,45">Ø76.1 (DN65)</option><option value="80,50">Ø88.9 (DN80)</option>
                    <option value="100,60">Ø108 (DN100)</option>
                </select>
                <div class="res-grid">
                    <div class="res-box"><span id="val-sert-axe" class="res-val">--</span><span class="res-txt">Axe (mm)</span></div>
                    <div class="res-box"><span id="val-sert-em" class="res-val">--</span><span class="res-txt">Emboîtement (mm)</span></div>
                </div>
            </div>
        </div>

        <div id="sec-aba" style="display:none;">
            <select id="sel-norme" onchange="renderAbaque()">
                <option value="iso">ISO / Acier (DN15 - DN600)</option>
                <option value="asme_bpe">ASME BPE (Pharma)</option>
                <option value="swagelok">Swagelok (Instrumentation)</option>
            </select>
            <div class="card" style="padding:0">
                <table id="abaque-table"><thead><tr id="thr"></tr></thead><tbody id="abaque-body"></tbody></table>
            </div>
        </div>
    </div>

    <script>
        const bigData = {
            iso: { h: ["DN", "Ext mm", "Pouce"], d: [["15","21.3","1/2"],["50","60.3","2"],["100","114.3","4"],["200","219.1","8"],["300","323.9","12"],["400","406.4","16"],["500","508.0","20"],["600","610.0","24"]] },
            swagelok: { h: ["Tube OD", "Ep mm", "Pression (psi)"], d: [["1/4\"","0.89","4000"],["3/8\"","0.89","2600"],["1/2\"","1.24","2500"]] }
        };

        function showTab(t) {
            ['sec-dec','sec-sert','sec-aba'].forEach(s => {
                const el = document.getElementById(s);
                if(el) el.style.display = 'none';
            });
            document.getElementById('sec-' + t).style.display = 'block';
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('t-' + t).classList.add('active');
            if(t==='aba') renderAbaque();
        }

        function calcDecroche() {
            const h = document.getElementById('inp-dec-h').value;
            const e = document.getElementById('inp-dec-e').value || 0;
            if(h) {
                const axeAxe = Math.round(h * 1.414);
                const coupe = Math.round(axeAxe - (2 * e));
                document.getElementById('val-dec-axe').innerText = axeAxe;
                document.getElementById('val-dec-coupe').innerText = coupe > 0 ? coupe : "Err";
            }
        }

        function renderAbaque() {
            const n = document.getElementById('sel-norme').value;
            if(!bigData[n]) return;
            document.getElementById('thr').innerHTML = bigData[n].h.map(h => `<th>${h}</th>`).join('');
            document.getElementById('abaque-body').innerHTML = bigData[n].d.map(r => `<tr>${r.map(c => `<td>${c}</td>`).join('')}</tr>`).join('');
        }

        function calcSert() {
            const val = document.getElementById('sel-sert').value.split(',');
            document.getElementById('val-sert-axe').innerText = Math.round(val[0] * 1.3);
            document.getElementById('val-sert-em').innerText = val[1];
        }

        window.onload = () => { calcSert(); };
    </script>
</body>
</html>
